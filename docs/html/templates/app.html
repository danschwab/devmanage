<div id="app">
    <header>
        <nav :class="{ 'open': isMenuOpen }">
            <a href="#"><img src="images/logo.png" alt="Top Shelf Exhibits" /></a>
            
            <span id="navbar">
                <template v-if="isAuthenticated">
                    <a v-for="item in navigationItems" 
                       :key="item.file"
                       :class="{ 'active': currentPage === item.file }"
                       @click="navigateToPage(item.file); isMenuOpen = false"
                       href="#">
                        {{ item.title }}
                    </a>
                </template>
                
                <button v-if="!isAuthenticated" 
                        @click="login" 
                        :disabled="isAuthLoading"
                        class="login-out-button active">
                    {{ isAuthLoading ? 'Loading...' : 'Login' }}
                </button>
                <button v-else 
                        @click="logout" 
                        :disabled="isAuthLoading"
                        class="login-out-button">
                    {{ isAuthLoading ? 'Logging out...' : `Logout (${currentUser?.name})` }}
                </button>
            </span>
            
            <button class="button-symbol gray" @click="toggleMenu">
                {{ isMenuOpen ? '×' : '≡' }}
            </button>
        </nav>
    </header>

    <div id="app-content">
        <!-- Show auth error if present -->
        <div v-if="authError" class="error-message" style="background: #ffebee; border: 1px solid #f44336; padding: 1rem; margin: 1rem; border-radius: 4px; color: #c62828;">
            <strong>Authentication Error:</strong> {{ authError }}
            <button @click="authError = null" style="float: right; background: none; border: none; font-size: 1.2em; cursor: pointer;">&times;</button>
        </div>

        <!-- Dynamic containers inserted directly here -->
        <app-container 
            v-for="container in containers" 
            :key="container.id"
            :container-id="container.id"
            :container-type="container.type"
            :title="container.title"
            :card-style="container.cardStyle"
            :show-close-button="container.type !== 'dashboard-overview'"
            :show-hamburger-menu="!container.type.startsWith('dashboard')"
            :show-expand-button="container.cardStyle"
            :page-location="container.pageLocation"
            :hamburger-menu-content="getHamburgerMenuContent(container.type)"
            :container-data="getContainerData(container)"
            @close-container="removeContainer"
            @show-hamburger-menu="showHamburgerMenuModal"
            @expand-container="expandContainer">
            <template #content>
                <!-- Load page content dynamically -->
                <div v-if="container.pageContent" v-html="container.pageContent"></div>
                <div v-else>
                    <p>Loading {{ container.type }} content...</p>
                </div>
            </template>
        </app-container>
        
        <footer>
            <p>
                &copy; 2024 Top Shelf Exhibits
                <br>
                <a href="https://topshelfexhibits.com">www.topshelfexhibits.com</a>
            </p>
        </footer>
    </div>
</div>
<!-- Modal Space -->
<div id="modal-space">
    <transition-group name="fade">
        <app-modal 
            v-for="modal in modals" 
            :key="modal.id"
            :modal-id="modal.id"
            :title="modal.title"
            :is-visible="modal.isVisible"
            @close-modal="removeModal">
            <template #content>
                <div v-if="modal.content" v-html="modal.content"></div>
                <div v-else>
                    <p>Modal {{ modal.id }} content</p>
                </div>
            </template>
        </app-modal>
    </transition-group>
</div>
                <a href="https://topshelfexhibits.com">www.topshelfexhibits.com</a>
            </p>
        </footer>
    </div>
</div>
<!-- Modal Space -->
<div id="modal-space">
    <transition-group name="fade">
        <app-modal 
            v-for="modal in modals" 
            :key="modal.id"
            :modal-id="modal.id"
            :title="modal.title"
            :is-visible="modal.isVisible"
            @close-modal="removeModal">
            <template #content>
                <div v-if="modal.content" v-html="modal.content"></div>
                <div v-else>
                    <p>Modal {{ modal.id }} content</p>
                </div>
            </template>
        </app-modal>
    </transition-group>
</div>
        </app-modal>
    </transition-group>
</div>
